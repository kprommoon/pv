<!DOCTYPE html>

<html>
<head>
  <title>SME Kit</title>
  <!-- test -->
  <!-- ** CSS ** -->
  <!-- base library -->
  <link rel="stylesheet" type="text/css" href="extjs/ext-all.css" />

  <!-- overrides to base library -->
  <link rel="stylesheet" type="text/css" href="extjs/resources/css/xtheme-gray.css" />
  <link rel="stylesheet" type="text/css" href="extjs/ux/css/Portal.css" />

  <!-- page specific -->
  <link rel="stylesheet" type="text/css" href="css/style.css" />

  <style type="text/css">
    .message {
        margin: 7px 5px;
        background-color: #eee;
        border: 1px solid #999;
    }

    .message-top {
        background-color: #777;
        color: #fff;
        font-size: 14px;
        padding: 2px 5px;
        font-weight: bold;
    }

    .message-body {
        font-size: 12px;
        padding: 2px 5px;
    }

    .message-bottom {
        border-top: 1px solid #fff;
        margin-top: 5px;
        padding: 2px 5px;
        font-size: 10px;
        text-align: right;
    }


  </style>

  <!-- ** Javascript ** -->

  <!-- base library -->
  <script type="text/javascript" src="extjs/core/ext-base.js"></script>
  <script type="text/javascript" src="extjs/core/ext-all-debug.js"></script>

  <!-- extensions -->
  <script type="text/javascript" src="extjs/ux/Portal.js"></script>
  <script type="text/javascript" src="extjs/ux/PortalColumn.js"></script>
  <script type="text/javascript" src="extjs/ux/Portlet.js"></script>
  <script type="text/javascript" src="extjs/ux/SearchField.js"></script>
  <script type="text/javascript" src="extjs/ux/TabCloseMenu.js"></script>

  <!-- page specific -->
  <script type="text/javascript">
Ext.onReady(function(){
    /*!
     * Project Menu
     */
    var projectMenu = new Ext.Toolbar({
        items: [{
            text: 'New',
            menu: new Ext.menu.Menu({
                items: [{
                    text: 'Quotation'
                },{
                    text: 'Invoice'
                },{
                    text: 'Job'
                },{
                    text: 'PO'
                },{
                    text: 'Files'
                },{
                    text: 'Project'
                },{
                    text: 'Payment'
                },{
                    text: 'Expense'
                }]
            })
        },{
            text: 'Delete'
        }]
    });

    /*!
     * Project Bag
     */
    var treePan = new Ext.tree.TreePanel({
        animate: true,
        loader: new Ext.tree.TreeLoader(),
        rootVisible: false,
        lines: false,
        root: new Ext.tree.AsyncTreeNode({
            id: 'isroot',
            expanded: true,
            children: [{
                text: 'Project Summary',
                leaf: true
            },{
                text: 'Profit & Loss',
                leaf: true
            },{
                text: 'Quotation',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Invoice',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Job',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'PO',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Files',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Project',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Payment',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Expense',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            }]
        })
    });

    /*!
     * Message Board
     */
    var mesBoard = [
        {
            region: 'center',
            layout: 'fit',
            items: [{
                autoScroll: true,
                html: '<div id="mboard">' + message('This quotation need to ' +
                    'prove by p\'Suda befor send to customer.') + '</div>'
            }]
        },{
            region: 'south',
            height: 150,
            split: false,
            title: 'Post a message',
            items: [{
                xtype: 'htmleditor',
                id: 'posttext',
	            enableColors: false,
                enableAlignments: false,
	            enableFont: false,
	            enableLinks: false,
	            enableFontSize: false,
    	        enableSourceEdit: false
            }],
            bbar: {
                items:[{
                    text: 'Submit',
                    iconCls: 'save',
    	            handler: function(){
                        var dh = Ext.DomHelper;
						postText = Ext.getCmp('posttext').getValue();
		                mboard = Ext.getDom('mboard').innerHTML;
		                mboard += message(postText);
		                Ext.getDom('mboard').innerHTML = mboard;
		                Ext.getCmp('posttext').setValue("");
		            }
                }]
            }
        }
    ];

    /*!
     * Quotation Form
     */
    var sm = new Ext.grid.CheckboxSelectionModel();
    var quoForm = new Ext.FormPanel({
        labelAlign: 'top',
        autoScroll: true,
        frame:true,
        items: [{
            layout:'column',
            items:[{
                columnWidth:.5,
                layout: 'form',
                items: [{
                    xtype:'textfield',
                    fieldLabel: 'Code',
                    name: 'code',
                    anchor:'95%'
                }, {
                    xtype:'textfield',
                    fieldLabel: 'Sales',
                    name: 'sales',
                    anchor:'95%'
                }, {
                    xtype:'textfield',
                    fieldLabel: 'Project Code',
                    name: 'pcode',
                    anchor:'95%'
                }]
            },{
                columnWidth:.5,
                layout: 'form',
                items: [{
                    xtype:'datefield',
                    fieldLabel: 'Issue Date',
                    name: 'issue',
                    anchor:'95%',
                    value: getDate()
                },{
                    xtype:'datefield',
                    fieldLabel: 'Validity',
                    name: 'validity',
                    anchor:'95%',
                    value: getValidity()
                }]
            }]
        },{
            title: 'Customer',
            items: [{
                xtype: 'fieldset',
                title: 'Customize customer',
                checkboxToggle: true,
                autoHeight: true,
                collapsed: true,
                items: [{
                    layout:'column',
                    items:[{
                        columnWidth:.5,
                        layout: 'form',
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'Name',
                            name: 'customname',
                            anchor:'95%'
                        }, {
                            xtype:'combo',
                            fieldLabel: 'Contact method',
                            name: 'conmeth',
                            mode: 'local',
                            store: new Ext.data.SimpleStore({
                                fields: ['id', 'value'],
                                data: [
                                    ['1','Name'],
                                    ['2','Email'],
                                    ['3','Mobile'],
                                    ['4','Phone']
                                ]
                            }),
                            displayField: 'value',
                            triggerAction: 'all',
                            anchor:'95%'
                        }]
                    },{
                        columnWidth:.5,
                        layout: 'form',
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'Address line 1',
                            name: 'address1',
                            anchor:'95%'
                        },{
                            xtype:'textfield',
                            fieldLabel: 'Address line 2',
                            name: 'address2',
                            anchor:'95%'
                        },{
                            xtype:'textfield',
                            fieldLabel: 'Address line 3',
                            name: 'address3',
                            anchor:'95%'
                        }]
                    }]
                }]
            }]
        },{
            xtype: 'grid',
            title: 'Details',
            autoHeight: true,
            style: 'margin-bottom: 10px',
            columnLines: true,
            sm: sm,
            cm: new Ext.grid.ColumnModel({
                columns: [
                    sm,
                    {header: "Description", sortable: true, dataIndex: 'desc', width: 200},
                    {header: "Qty.", sortable: true, dataIndex: 'qty'},
                    {header: "Unit Price", sortable: true, dataIndex: 'uprice'},
                    {header: "Amount", sortable: true, dataIndex: 'amount'}
                ]
            }),
            store: new Ext.data.Store({
                data: [
                    [
                        "Lorem ipsum et dolor sit amet",
                        "9.99",
                        "9.99",
                        "9999.99"
                    ],[
                        "Lorem ipsum et dolor sit amet",
                        "9.99",
                        "9.99",
                        "9999.99"
                    ],[
                        "Lorem ipsum et dolor sit amet",
                        "9.99",
                        "9.99",
                        "9999.99"
                    ],[
                        "Lorem ipsum et dolor sit amet",
                        "9.99",
                        "9.99",
                        "9999.99"
                    ]
                ],
                reader: new Ext.data.ArrayReader({id: 'id'},[
                    {name: 'desc'},
                    {name: 'qty'},
                    {name: 'uprice'},
                    {name: 'amount'}
                ])
            }),
            bbar: [{
                text: 'Add Detail',
                iconCls: 'add-prop'
            },{
                text: 'Delete Detail',
                iconCls: 'del-prop'
            }]
        },{
            layout:'column',
            items:[{
                columnWidth:.5,
                layout: 'form',
                items: [{
                    xtype:'textfield',
                    fieldLabel: 'Total',
                    name: 'total',
                    anchor:'95%'
                }, {
                    xtype:'textfield',
                    fieldLabel: 'Grand Total',
                    name: 'grand total',
                    anchor:'95%'
                },{
                    xtype: 'htmleditor',
                    fieldLabel: 'Remark',
                    name: 'remark',
                    anchor: '95%',
    	            enableColors: false,
                    enableAlignments: false,
	                enableFont: false,
	                enableLinks: false,
	                enableFontSize: false,
        	        enableSourceEdit: false,
                    height: 116
                }]
            },{
                columnWidth:.5,
                layout: 'form',
                items: [{
                    xtype:'textfield',
                    fieldLabel: 'Vat %',
                    name: 'vpercent',
                    anchor:'95%'
                }, {
                    xtype:'textfield',
                    fieldLabel: 'Vat',
                    name: 'vat',
                    anchor:'95%'
                }]
            }]
        }]
    });

    /*!
     * Message Board functions
     */

    function getDate() {
        var dt = new Date();
	    var month = dt.getMonth() + 1
	    var day = dt.getDate()
	    var year = dt.getFullYear()
	    return ("" + month + "/" + day + "/" + year)
    }
    function getValidity() {
        var dt = new Date();
	    var month = dt.getMonth() + 2
	    var day = dt.getDate()
	    var year = dt.getFullYear()
	    return ("" + month + "/" + day + "/" + year)
    }
    function dateTimeToText(dt) {
		    var month = dt.getMonth() + 1
		    var day = dt.getDate()
		    var year = dt.getFullYear()
		    var min = dt.getMinutes()
		    var hour = dt.getHours()
		    return ("" + hour + ":" + min + " " + month + "/" + day + "/" + year)
    }

    function currentTime() {
		var currentTime = new Date()
		return dateTimeToText(currentTime)
    }

    function message(text) {
        var result = '';
        result += '<div class="message">';
        result += '<div class="message-top">';
        result += 'User';
        result += '</div>';
        result += '<div class="message-body">';
        result += text;
        result += '</div>';
        result += '<div class="message-bottom">';
        result += currentTime();
        result += '</div>';
        result += '</div>';
        return result;
    }

    /*!
     * Application Tab
     */
    var appTab = new Ext.TabPanel({
        activeTab: 1,
    	plain:true,
        id: 'application-tab',
        defaults: {
            closable: true
        },
        items: [{
            id: 'home',
            closable: false,
            title: 'Home',
            iconCls: 'home',
            tbar: ['Company Name','-',
            new Ext.app.SearchField({
                width:240,
                store: this.searchStore,
                paramName: 'q',
            }),'->','FirstName LastName','-',
            {
                text: 'Preference',
                iconCls: 'preference'
            },'-',{
                text: 'Logout',
                iconCls: 'logout'
            }],
        },{
            title: 'Demo Project',
            layout: 'border',
            items: [{
                region: 'west',
                title: 'Project Bag',
                width: 200,
                split: true,
                collapsible: true,
                layout: 'fit',
                items: [treePan],
                bbar: projectMenu
            },{
                region: 'center',
                title: 'Demo Project',
                layout: 'fit',
                items: [quoForm]
            },{
                region: 'east',
                title: 'Message Board',
                layout: 'border',
                items: mesBoard,
                width: 250,
                split: true,
                collapsible: true
            }]
        }],
        plugins: new Ext.ux.TabCloseMenu()
    });

    /*!
     * Viewport
     */
    var viewport = new Ext.Viewport({
        layout: 'fit',
        defaults: {
            autoScroll: true,
            style: 'overflow-x: hidden'
        },
        items: [appTab]
    });
})
  </script>
</head>

<body>
</body>

</html>
