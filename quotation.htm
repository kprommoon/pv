<!DOCTYPE html>

<html>
<head>
  <title>SME Kit</title>
  <!-- test -->
  <!-- ** CSS ** -->
  <!-- base library -->
  <link rel="stylesheet" type="text/css" href="extjs/ext-all.css" />

  <!-- overrides to base library -->
  <link rel="stylesheet" type="text/css" href="extjs/resources/css/xtheme-gray.css" />
  <link rel="stylesheet" type="text/css" href="extjs/ux/css/Portal.css" />

  <!-- page specific -->
  <link rel="stylesheet" type="text/css" href="css/style.css" />

  <!-- ** Javascript ** -->

  <!-- base library -->
  <script type="text/javascript" src="extjs/core/ext-base.js"></script>
  <script type="text/javascript" src="extjs/core/ext-all-debug.js"></script>

  <!-- extensions -->
  <script type="text/javascript" src="extjs/ux/Portal.js"></script>
  <script type="text/javascript" src="extjs/ux/PortalColumn.js"></script>
  <script type="text/javascript" src="extjs/ux/Portlet.js"></script>
  <script type="text/javascript" src="extjs/ux/SearchField.js"></script>
  <script type="text/javascript" src="extjs/ux/TabCloseMenu.js"></script>


<style type="text/css">
#application-tab .x-tab-strip-spacer {
	border-color: #EAEAEA;
}

#home-toolbar {
    /* margin: -3px 0 0; */
    border-top: 1px solid #D0D0D0;
}

.stickynote {
    background: #fff29b;
    margin: 5px;
}

.stickynote .by {
    color:#c88818;
    font-size:13px;
    text-align:center;
    padding:2px;
}

.stickynote .date {
    background-color:#f9eb8c;
    color: #c88818;
    bottom:0;
    font-size:9px;
    padding:1px 2px;
    text-align:right;
}

.stickynote .message {
    color:#333;
    font-size: 12px;
    padding:0 5px 5px;
}

</style>

  <!-- page specific -->
  <script type="text/javascript">
Ext.onReady(function(){
    /*!
     * Project Menu
     */
    var projectMenu = new Ext.Toolbar({
        items: [{
            text: 'New',
            menu: new Ext.menu.Menu({
                items: [{
                    text: 'Quotation'
                },{
                    text: 'Invoice'
                },{
                    text: 'Job'
                },{
                    text: 'PO'
                },{
                    text: 'Files'
                },{
                    text: 'Project'
                },{
                    text: 'Payment'
                },{
                    text: 'Expense'
                }]
            })
        },{
            text: 'Delete'
        }]
    });

    /*!
     * Project Bag
     */
    var treePan = new Ext.tree.TreePanel({
        animate: true,
        loader: new Ext.tree.TreeLoader(),
        rootVisible: false,
        lines: false,
        root: new Ext.tree.AsyncTreeNode({
            id: 'isroot',
            expanded: true,
            children: [{
                text: 'Project Summary',
                leaf: true
            },{
                text: 'Profit & Loss',
                leaf: true
            },{
                text: 'Quotation',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Invoice',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Job',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'PO',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Files',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Project',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Payment',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            },{
                text: 'Expense',
                leaf: false,
                children: [{
                    text: '01/01/2010',
                    leaf: true
                },{
                    text: '10/10/2010',
                    leaf: true
                }]
            }]
        })
    });

    /*
     * Application Tab post function
     */
    var dateTimeToText = function(dt){
		    var month = dt.getMonth() + 1
		    var day = dt.getDate()
		    var year = dt.getFullYear()
		    var min = dt.getMinutes()
		    var hour = dt.getHours()
		    return ("" + hour + ":" + min + " " + month + "/" + day + "/" + year)
    }    
    
    var currentTime = function(){
		var currentTime = new Date()
		return dateTimeToText(currentTime)
    }
         
    var messagePacking = function(message){
	    var m = ""
   	    m = m + "<div class='by'>Apirak</div>"	    
	    m = m + "<div class='message'>" + message + "</div>"
	    m = m + "<div class='date'>" + currentTime() + "</div>"
	    m = "<div class='stickynote'>" + m + "</div>"
	    return m
    }

    /*!
     * Application Tab
     */
    var appTab = new Ext.TabPanel({
        activeTab: 1,
    	plain:true,
    	border: false,
        id: 'application-tab',
        defaults: {
            closable: true
        },
        items: [{
            id: 'home',
            closable: false,
            title: 'Home',
            iconCls: 'home',
            tbar: new Ext.Toolbar({
                id: 'home-toolbar',
                border: true,
                items: ['Company Name','-',
                    new Ext.app.SearchField({
                        width:240,
                        store: this.searchStore,
                        paramName: 'q',
                    }),'->','FirstName LastName','-',
                {
                    text: 'Preference',
                    iconCls: 'preference'
                },'-',{
                    text: 'Logout',
                    iconCls: 'logout'
                }]
            }),
        },{
            title: 'Honda CSR',
            layout: 'border',
            border: false,
            items: [{
                region: 'west',
                title: 'Project Bag',
                width: 200,
                split: true,
                collapsible: true,
                layout: 'fit',
                items: [treePan],
                bbar: projectMenu
            },{
                region: 'center',
                tbar: ['<b>Quotation (10/10/2010)</b>',' ',
                    {
                        text: 'New',
                        iconCls: 'new'
                    },{
                        text: 'Save',
                        iconCls: 'save'
                    },{
                        text: 'Revisions',
                        iconCls: 'revision',
                        menu: new Ext.menu.Menu({
                            items: [{
                                text: '01/01/2010'
                            },{
                                text: '10/10/2010'
                            }]
                        })
                    },{
                        text: 'Cancel',
                        iconCls: 'cancel'
                    }]
            },{
                region: 'east',
                title: 'Message Board',
                layout: 'vbox',
                width: 300,
                split: true,
                collapsible: true,
                layoutConfig: {
                    align: 'stretch',
                    pack: 'start'
                },
                items: [{
                    html:"<div id='log-list'><div class='stickynote'><div class='by'>Apirak</div><div class='message'>This quotation need to prove by p'Suda befor send to customer.</div><div class='date'>14:13 10/14/2010</div></div></div>",
                    border:false,
                    flex:1
                },{
                    xtype:'htmleditor',
                    id:'messageLog',
                    border: false,
                    height:100,
                    anchor:'98%',
			        enableColors: false,
                    enableAlignments: false,
			        enableFont: false,
			        enableLinks: false,
			        enableFontSize: false,
			        enableSourceEdit: false
                }],
                bbar: {
                    items:[{
                        text: 'Save',
                        iconCls: 'save',
			            handler: function(){
                            var dh = Ext.DomHelper;
							temp_message = Ext.getCmp('messageLog').getValue();
			                logListHTML = Ext.getDom('log-list').innerHTML;
			                loglistHTML = logListHTML + messagePacking(temp_message);
			                Ext.getDom('log-list').innerHTML = loglistHTML;
			                Ext.getCmp('messageLog').setValue("");
			            }
                    }]
                }
            }]
        }],
        plugins: new Ext.ux.TabCloseMenu()
    });

    /*!
     * Viewport
     */
    var viewport = new Ext.Viewport({
        layout: 'fit',
        defaults: {
            autoScroll: true,
            style: 'overflow-x: hidden'
        },
        items: [appTab]
    });
})
  </script>
</head>

<body>
</body>

</html>
